<script>
const GAS_URL ="https://script.google.com/macros/s/AKfycbxFSiynDGOy_sDz-V_493tclfdwwBEzpFVVMABMSbqhNjotNuRZte9SviHbvWE5uuXb/exec";

// 予約処理
function reserve() {
  const payload = {
    mode: "reserve",
    room:  document.getElementById("room").value,
    date:  document.getElementById("date").value,
    start: document.getElementById("start").value,
    end:   document.getElementById("end").value,
    name:  document.getElementById("name").value
  };

  fetch(GAS_URL, {
    method: "POST",
    body: JSON.stringify(payload)
  })
  .then(r => r.json())
  .then(data => {
      console.log(data);

      if (data.mode === "reserved") {
          alert("予約が完了しました！");
      } else {
          alert("エラーが発生しました");
      }
  })
  .catch(err => {
      console.error(err);
      alert("通信エラーが発生しました");
  });
}   // ← ★★★ ここが抜けていた！ ★★★


// 予約一覧取得
function loadList() {
  fetch(GAS_URL + "?mode=list")
    .then(r => r.json())
    .then(data => {
      let html = "<ul>";
      data.forEach(ev => {
        html += `<li>${ev.start} - ${ev.end}：${ev.title}</li>`;
      });
      html += "</ul>";
      document.getElementById("list").innerHTML = html;
    });
}
</script>